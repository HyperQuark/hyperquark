const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-fAtx9t10.js","assets/index-Dz9E7hSa.js","assets/index-Ai1PwB6X.css"])))=>i.map(i=>d[i]);
import{G as pe,H as ge,_ as he,r as S,z as ye,x as ke,c as oe,o as X,e as je,k as ve,A as ie,I as xe,j as k,b as u,d as U,t as C,g as Se,L as Ae,F as Te}from"./index-Dz9E7hSa.js";import{_ as Oe,g as W}from"./settings-BfrP3vRx.js";const De="/hyperquark/main/assets/hyperquark_bg-DjBZskOM.wasm";let s;function Ee(t){s=t}let $=null;function E(){return($===null||$.byteLength===0)&&($=new Uint8Array(s.memory.buffer)),$}function fe(t,e){return t=t>>>0,E().subarray(t/1,t/1+e)}function we(t){const e=s.__externref_table_alloc();return s.__wbindgen_export_2.set(e,t),e}function Fe(t,e){try{return t.apply(this,e)}catch(n){const _=we(n);s.__wbindgen_exn_store(_)}}const Le=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let ue=new Le("utf-8",{ignoreBOM:!0,fatal:!0});ue.decode();function A(t,e){return t=t>>>0,ue.decode(E().subarray(t,t+e))}function K(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const r=t.description;return r==null?"Symbol":`Symbol(${r})`}if(e=="function"){const r=t.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(t)){const r=t.length;let a="[";r>0&&(a+=K(t[0]));for(let o=1;o<r;o++)a+=", "+K(t[o]);return a+="]",a}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let _;if(n&&n.length>1)_=n[1];else return toString.call(t);if(_=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:_}let w=0;const Me=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let q=new Me("utf-8");const Pe=typeof q.encodeInto=="function"?function(t,e){return q.encodeInto(t,e)}:function(t,e){const n=q.encode(t);return e.set(n),{read:t.length,written:n.length}};function j(t,e,n){if(n===void 0){const g=q.encode(t),f=e(g.length,1)>>>0;return E().subarray(f,f+g.length).set(g),w=g.length,f}let _=t.length,r=e(_,1)>>>0;const a=E();let o=0;for(;o<_;o++){const g=t.charCodeAt(o);if(g>127)break;a[r+o]=g}if(o!==_){o!==0&&(t=t.slice(o)),r=n(r,_,_=o+t.length*3,1)>>>0;const g=E().subarray(r+o,r+_),f=Pe(t,g);o+=f.written,r=n(r,_,o,1)>>>0}return w=o,r}let D=null;function v(){return(D===null||D.buffer.detached===!0||D.buffer.detached===void 0&&D.buffer!==s.memory.buffer)&&(D=new DataView(s.memory.buffer)),D}function Q(t){return t==null}function ze(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`)}function F(t){const e=s.__wbindgen_export_2.get(t);return s.__externref_table_dealloc(t),e}function Ce(t,e){const n=j(t,s.__wbindgen_malloc,s.__wbindgen_realloc),_=w;ze(e,B);var r=e.__destroy_into_raw();const a=s.sb3_to_wasm(n,_,r);if(a[2])throw F(a[1]);return J.__wrap(a[0])}function Re(t,e){const n=e(t.length*1,1)>>>0;return E().set(t,n/1),w=t.length,n}function ee(t,e){t=t>>>0;const n=v(),_=[];for(let r=t;r<t+4*e;r+=4)_.push(s.__wbindgen_export_2.get(n.getUint32(r,!0)));return s.__externref_drop_slice(t,e),_}function te(t,e){const n=e(t.length*4,4)>>>0;for(let _=0;_<t.length;_++){const r=we(t[_]);v().setUint32(n+4*_,r,!0)}return w=t.length,n}const ae=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>s.__wbg_finishedwasm_free(t>>>0,1));class J{static __wrap(e){e=e>>>0;const n=Object.create(J.prototype);return n.__wbg_ptr=e,ae.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ae.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_finishedwasm_free(e,0)}get wasm_bytes(){const e=s.__wbg_get_finishedwasm_wasm_bytes(this.__wbg_ptr);var n=fe(e[0],e[1]).slice();return s.__wbindgen_free(e[0],e[1]*1,1),n}set wasm_bytes(e){const n=Re(e,s.__wbindgen_malloc),_=w;s.__wbg_set_finishedwasm_wasm_bytes(this.__wbg_ptr,n,_)}get strings(){const e=s.__wbg_get_finishedwasm_strings(this.__wbg_ptr);var n=ee(e[0],e[1]).slice();return s.__wbindgen_free(e[0],e[1]*4,4),n}set strings(e){const n=te(e,s.__wbindgen_malloc),_=w;s.__wbg_set_finishedwasm_strings(this.__wbg_ptr,n,_)}get target_names(){const e=s.__wbg_get_finishedwasm_target_names(this.__wbg_ptr);var n=ee(e[0],e[1]).slice();return s.__wbindgen_free(e[0],e[1]*4,4),n}set target_names(e){const n=te(e,s.__wbindgen_malloc),_=w;s.__wbg_set_finishedwasm_target_names(this.__wbg_ptr,n,_)}}const ce=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>s.__wbg_flaginfo_free(t>>>0,1));class _e{static __wrap(e){e=e>>>0;const n=Object.create(_e.prototype);return n.__wbg_ptr=e,ce.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ce.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_flaginfo_free(e,0)}get name(){let e,n;try{const _=s.__wbg_get_flaginfo_name(this.__wbg_ptr);return e=_[0],n=_[1],A(_[0],_[1])}finally{s.__wbindgen_free(e,n,1)}}set name(e){const n=j(e,s.__wbindgen_malloc,s.__wbindgen_realloc),_=w;s.__wbg_set_flaginfo_name(this.__wbg_ptr,n,_)}get description(){let e,n;try{const _=s.__wbg_get_flaginfo_description(this.__wbg_ptr);return e=_[0],n=_[1],A(_[0],_[1])}finally{s.__wbindgen_free(e,n,1)}}set description(e){const n=j(e,s.__wbindgen_malloc,s.__wbindgen_realloc),_=w;s.__wbg_set_flaginfo_description(this.__wbg_ptr,n,_)}get ty(){let e,n;try{const _=s.__wbg_get_flaginfo_ty(this.__wbg_ptr);return e=_[0],n=_[1],A(_[0],_[1])}finally{s.__wbindgen_free(e,n,1)}}set ty(e){const n=j(e,s.__wbindgen_malloc,s.__wbindgen_realloc),_=w;s.__wbg_set_flaginfo_ty(this.__wbg_ptr,n,_)}wasm_features(e){const n=j(e,s.__wbindgen_malloc,s.__wbindgen_realloc),_=w,r=s.flaginfo_wasm_features(this.__wbg_ptr,n,_);let a;return r[0]!==0&&(a=ee(r[0],r[1]).slice(),s.__wbindgen_free(r[0],r[1]*4,4)),a}to_js(){const e=s.flaginfo_to_js(this.__wbg_ptr);if(e[2])throw F(e[1]);return F(e[0])}}const Y=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>s.__wbg_wasmflags_free(t>>>0,1));class B{static __wrap(e){e=e>>>0;const n=Object.create(B.prototype);return n.__wbg_ptr=e,Y.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Y.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_wasmflags_free(e,0)}get string_type(){return s.__wbg_get_wasmflags_string_type(this.__wbg_ptr)}set string_type(e){s.__wbg_set_wasmflags_string_type(this.__wbg_ptr,e)}get wasm_opt(){return s.__wbg_get_wasmflags_wasm_opt(this.__wbg_ptr)}set wasm_opt(e){s.__wbg_set_wasmflags_wasm_opt(this.__wbg_ptr,e)}get scheduler(){return s.__wbg_get_wasmflags_scheduler(this.__wbg_ptr)}set scheduler(e){s.__wbg_set_wasmflags_scheduler(this.__wbg_ptr,e)}static from_js(e){const n=s.wasmflags_from_js(e);if(n[2])throw F(n[1]);return B.__wrap(n[0])}to_js(){const e=s.wasmflags_to_js(this.__wbg_ptr);if(e[2])throw F(e[1]);return F(e[0])}constructor(e){const n=te(e,s.__wbindgen_malloc),_=w,r=s.wasmflags_new(n,_);return this.__wbg_ptr=r>>>0,Y.register(this,this.__wbg_ptr,this),this}static flag_info(e){const n=j(e,s.__wbindgen_malloc,s.__wbindgen_realloc),_=w,r=s.wasmflags_flag_info(n,_);return _e.__wrap(r)}}function Be(t){return t.buffer}function Ve(t){return Object.entries(t)}function Ie(){return Fe(function(t,e){globalThis.crypto.getRandomValues(fe(t,e))},arguments)}function Ue(t,e){return t[e>>>0]}function $e(t,e){return t[e]}function We(t){let e;try{e=t instanceof ArrayBuffer}catch{e=!1}return e}function qe(t){let e;try{e=t instanceof Uint8Array}catch{e=!1}return e}function Ne(t){return t.length}function Je(t){return t.length}function Ge(t,e){console.log(A(t,e))}function He(){return new Object}function Xe(){return new Map}function Ye(){return new Array}function Ze(t){return new Uint8Array(t)}function Ke(t,e,n){t[e>>>0]=n}function Qe(t,e,n){t[e]=n}function et(t,e,n){t.set(e,n>>>0)}function tt(t,e,n){return t.set(e,n)}function nt(t){const e=t;return typeof e=="boolean"?e?1:0:2}function _t(t,e){const n=K(e),_=j(n,s.__wbindgen_malloc,s.__wbindgen_realloc),r=w;v().setInt32(t+4*1,r,!0),v().setInt32(t+4*0,_,!0)}function st(t,e){return new Error(A(t,e))}function rt(t,e){return t in e}function ot(){const t=s.__wbindgen_export_2,e=t.grow(4);t.set(0,void 0),t.set(e+0,void 0),t.set(e+1,null),t.set(e+2,!0),t.set(e+3,!1)}function it(t){const e=t;return typeof e=="object"&&e!==null}function at(t){return typeof t=="string"}function ct(t){return t===void 0}function lt(t,e){return t==e}function gt(){return s.memory}function ft(t,e){const n=e,_=typeof n=="number"?n:void 0;v().setFloat64(t+8*1,Q(_)?0:_,!0),v().setInt32(t+4*0,!Q(_),!0)}function wt(t){return t}function ut(t,e){const n=e,_=typeof n=="string"?n:void 0;var r=Q(_)?0:j(_,s.__wbindgen_malloc,s.__wbindgen_realloc),a=w;v().setInt32(t+4*1,a,!0),v().setInt32(t+4*0,r,!0)}function bt(t,e){return A(t,e)}function dt(t,e){throw new Error(A(t,e))}function mt(t){let e;try{e=+t}catch(_){e=_}return e}URL=globalThis.URL;const i=await Oe({"./hyperquark_bg.js":{__wbg_log_ad598e66c039b732:Ge,__wbindgen_error_new:st,__wbindgen_string_get:ut,__wbindgen_is_string:at,__wbindgen_try_into_number:mt,__wbindgen_number_get:ft,__wbindgen_is_undefined:ct,__wbindgen_in:rt,__wbindgen_is_object:it,__wbindgen_string_new:bt,__wbindgen_number_new:wt,__wbindgen_jsval_loose_eq:lt,__wbindgen_boolean_get:nt,__wbg_getwithrefkey_1dc361bd10053bfe:$e,__wbg_set_3f1d0b984ed272ed:Qe,__wbg_length_e2d2a49132c1b256:Je,__wbg_new_78feb108b6472713:Ye,__wbg_new_5e0be73521bc8c17:Xe,__wbg_new_405e22f390576ce2:He,__wbg_get_b9b93047fe3cf45b:Ue,__wbg_set_37837023f3d740e8:Ke,__wbg_instanceof_ArrayBuffer_e14585432e3737fc:We,__wbg_set_8fc6bf8a5b1071d1:tt,__wbg_entries_3265d4158b33e5dc:Ve,__wbg_buffer_609cc3eee51ed158:Be,__wbg_new_a12002a7f91c75be:Ze,__wbg_instanceof_Uint8Array_17156bcf118086a9:qe,__wbg_length_a446193dc22c12f8:Ne,__wbg_set_65595bdd868b3009:et,__wbg_getRandomValues_3d90134a348e46b3:Ie,__wbindgen_debug_string:_t,__wbindgen_throw:dt,__wbindgen_memory:gt,__wbindgen_init_externref_table:ot}},De),pt=i.memory,ht=i.sb3_to_wasm,yt=i.__wbg_finishedwasm_free,kt=i.__wbg_get_finishedwasm_wasm_bytes,jt=i.__wbg_set_finishedwasm_wasm_bytes,vt=i.__wbg_get_finishedwasm_strings,xt=i.__wbg_set_finishedwasm_strings,St=i.__wbg_get_finishedwasm_target_names,At=i.__wbg_set_finishedwasm_target_names,Tt=i.all_wasm_features,Ot=i.wasm_feature_detect_name,Dt=i.__wbg_flaginfo_free,Et=i.__wbg_get_flaginfo_name,Ft=i.__wbg_set_flaginfo_name,Lt=i.__wbg_get_flaginfo_description,Mt=i.__wbg_set_flaginfo_description,Pt=i.__wbg_get_flaginfo_ty,zt=i.__wbg_set_flaginfo_ty,Ct=i.flaginfo_wasm_features,Rt=i.flaginfo_to_js,Bt=i.__wbg_wasmflags_free,Vt=i.__wbg_get_wasmflags_string_type,It=i.__wbg_set_wasmflags_string_type,Ut=i.__wbg_get_wasmflags_wasm_opt,$t=i.__wbg_set_wasmflags_wasm_opt,Wt=i.__wbg_get_wasmflags_scheduler,qt=i.__wbg_set_wasmflags_scheduler,Nt=i.wasmflags_from_js,Jt=i.wasmflags_to_js,Gt=i.wasmflags_new,Ht=i.wasmflags_flag_info,Xt=i.__wbindgen_exn_store,Yt=i.__externref_table_alloc,Zt=i.__wbindgen_export_2,Kt=i.__wbindgen_malloc,Qt=i.__wbindgen_realloc,en=i.__externref_table_dealloc,tn=i.__wbindgen_free,nn=i.__externref_drop_slice,be=i.__wbindgen_start,_n=Object.freeze(Object.defineProperty({__proto__:null,__externref_drop_slice:nn,__externref_table_alloc:Yt,__externref_table_dealloc:en,__wbg_finishedwasm_free:yt,__wbg_flaginfo_free:Dt,__wbg_get_finishedwasm_strings:vt,__wbg_get_finishedwasm_target_names:St,__wbg_get_finishedwasm_wasm_bytes:kt,__wbg_get_flaginfo_description:Lt,__wbg_get_flaginfo_name:Et,__wbg_get_flaginfo_ty:Pt,__wbg_get_wasmflags_scheduler:Wt,__wbg_get_wasmflags_string_type:Vt,__wbg_get_wasmflags_wasm_opt:Ut,__wbg_set_finishedwasm_strings:xt,__wbg_set_finishedwasm_target_names:At,__wbg_set_finishedwasm_wasm_bytes:jt,__wbg_set_flaginfo_description:Mt,__wbg_set_flaginfo_name:Ft,__wbg_set_flaginfo_ty:zt,__wbg_set_wasmflags_scheduler:qt,__wbg_set_wasmflags_string_type:It,__wbg_set_wasmflags_wasm_opt:$t,__wbg_wasmflags_free:Bt,__wbindgen_exn_store:Xt,__wbindgen_export_2:Zt,__wbindgen_free:tn,__wbindgen_malloc:Kt,__wbindgen_realloc:Qt,__wbindgen_start:be,all_wasm_features:Tt,flaginfo_to_js:Rt,flaginfo_wasm_features:Ct,memory:pt,sb3_to_wasm:ht,wasm_feature_detect_name:Ot,wasmflags_flag_info:Ht,wasmflags_from_js:Nt,wasmflags_new:Gt,wasmflags_to_js:Jt},Symbol.toStringTag,{value:"Module"}));Ee(_n);be();function sn(){const e=new Date(2e3,0,1),n=new Date,_=n.getTimezoneOffset()-e.getTimezoneOffset();let r=n.valueOf()-e.valueOf();return r+=(n.getTimezoneOffset()-_)*60*1e3,r/864e5}function rn(t){return t.toString()}function on(t){return t.toString()}function an(t){return parseFloat(t)}function cn(t,e){return t.toLowerCase()>e.toLowerCase()}function ln(t,e){return t.toLowerCase()===e.toLowerCase()}function gn(t,e){return t.toLowerCase().includes(e.toLowerCase())}function fn(t,e){return t.toLowerCase()<e.toLowerCase()}let N=[],de=!1,R,ne;function wn(t,e){N=t,R=N.map(n=>null),console.log(N,R),ne=e,de=!0}function me(){if(!de)throw new Error("shared state must be set up before use!")}function L(){return me(),N}function M(t,e,n){me(),R[t]===null?R[t]=ne.createSkin("text","sprite",e,n,!1):ne.updateTextSkin(R[t][0],e,n,!1)}function un(t,e){console.log("%s thinks: %d",L()[e],t)}function bn(t,e){console.log("%s says: %d",L()[e],t)}function dn(t,e){console.log("%s thinks: %d",L()[e],t)}function mn(t,e){console.log("%s says: %s",L()[e],t)}function pn(t,e){M(e,"say",t.toString())}function hn(t,e){console.log("%s thinks: %s",L()[e],t)}function yn(t,e){M(e,"think",t.toString())}function kn(t,e){M(e,"think",t)}function jn(t,e){M(e,"say",t)}function vn(t,e){console.log("%s says: %d",L()[e],t)}function xn(t,e){M(e,"think",t.toString())}function Sn(t,e){M(e,"say",t.toString())}function An(t,e,n){return t.substring(e,n)}function Tn(t,e){return t.concat(e)}function On(t){return t.length}const Dn={sensing:{dayssince2000:sn},"wasm:js-string":{substring:An,concat:Tn,length:On},looks:{think_debug_int:un,say_debug_int:bn,think_debug_float:dn,say_debug_string:mn,say_float:pn,think_debug_string:hn,think_float:yn,think_string:kn,say_string:jn,say_debug_float:vn,think_int:xn,say_int:Sn},cast:{int2string:rn,float2string:on,string2float:an},operator:{gt_string:cn,eq_string:ln,contains:gn,lt_string:fn}};await ge(()=>import("./renderer-6Nw22wv_.js"),[]);const En=pe();function Z(t,e,n,..._){let r=t.createDrawable(n.toString());const a={pen:"Pen",text:"Text",svg:"SVG"}[e.toLowerCase()];let o=t[`create${a}Skin`](..._);return t.updateDrawableSkinId(r,o),[o,r]}let le=!1;function Fn(t,e,n,_){if(le)return;le=!0,t.getDrawable=o=>t._allDrawables[o],t.getSkin=o=>t._allSkins[o],t.createSkin=(o,g,...f)=>Z(t,o,g,...f);const r=e.targets.map((o,g)=>o.costumes.map(({md5ext:f})=>n[f]));e.targets.map(o=>Object.fromEntries(o.costumes.map(({name:g},f)=>[g,f]))),window.renderer=t,t.setLayerGroupOrdering(["background","video","pen","sprite"]),Z(t,"pen","pen")[0];const a=e.targets.map((o,g)=>{const f=o.costumes[o.currentCostume],T=r[g][o.currentCostume],[O,y]=Z(t,T[0],"sprite",T[1],[f.rotationCenterX,f.rotationCenterY]),h=t.getDrawable(y);return o.is_stage||(h.updateVisible(o.visible),h.updatePosition([o.x,o.y]),h.updateDirection(o.rotation),h.updateScale([o.size,o.size])),[O,y]});console.log(a),wn(_,t)}const Ln=async({framerate:t=30,turbo:e,renderer:n,wasm_bytes:_,target_names:r,string_consts:a,project_json:o,assets:g}={framerate:30,turbo:!1})=>{En.debug&&window.open(URL.createObjectURL(new Blob([_],{type:"application/wasm"})));const f=Math.round(1e3/t);Fn(n,o,g,r),console.log("green flag setup complete");const O=[...W()["js-string-builtins"]?["js-string"]:[]];try{if(!WebAssembly.validate(_,{builtins:O}))throw Error()}catch{try{throw new WebAssembly.Module(_),new Error("invalid WASM module")}catch(b){throw new Error("invalid WASM module: "+b.message)}}function y(b){return new Promise(d=>{setTimeout(d,b)})}function h(){return new Promise(b=>{requestAnimationFrame(b)})}WebAssembly.instantiate(_,Dn,{builtins:O}).then(async({instance:b})=>{const{flag_clicked:d,tick:V,memory:p,strings:x,step_funcs:se,vars_num:re,threads_count:c,requests_refresh:l,upc:I,threads:P,noop:G,unreachable_dbg:H}=b.exports;x.grow(Object.entries(a).length);for(const[m,z]of Object.entries(a||{}))x.set(m,z);window.memory=p,window.flag_clicked=d,window.tick=V,window.stop=()=>{if(typeof P>"u"){let m=new Uint32Array(p.buffer);for(let z=0;z<c.value;z++)m[z]=0}else for(let m=0;m<P.length;m++)P.set(m,G);c.value=0},new DataView(p.buffer);try{H()}catch(m){console.info("synthetic error to expose wasm modulee to devtools:",m)}d(),console.log("green_flag()");e:for(;;){n.draw();const m=Date.now();do if(V(),c.value===0)break e;while(Date.now()-m<f*.8&&!e&&l.value===0);l.value=0,f>0?await y(Math.max(0,f-(Date.now()-m))):await h()}}).catch(b=>{throw new Error(`error when instantiating module:
`+b.stack)})},Mn=["value"],Pn={key:0},zn=["innerHTML"],Cn={__name:"ProjectPlayer",props:["json","title","author","assets","zip"],async setup(t){let e,n;const _=window.ScratchRender,r=t;let a=S(null),o=S("loading"),g=S("An error"),f=S(!1),T=S(null),O=S("loading assets"),y=S(!1),h=null,b,d;const V=async c=>{try{return r.zip?await r.zip.file(c).async("text"):await(await fetch(`https://assets.scratch.mit.edu/internalapi/asset/${c}/get/`)).text()}catch(l){a.value=`failed to load asset ${c}
${l.stack}`}};ye(()=>{b=new _(T.value)});let p,x;try{if(o.value="compiling",d=Ce(JSON.stringify(r.json),B.from_js(W().to_js())),console.log(d),!d instanceof J)throw new Error("unknown error occurred when compiling project");if(p=d.wasm_bytes,W().to_js().wasm_opt=="On")try{console.log("loading binaryen..."),console.log(W().to_js().scheduler);let c=([e,n]=ke(()=>ge(()=>import("./index-fAtx9t10.js"),__vite__mapDeps([0,1,2]))),e=await e,n(),e).default;console.log("optimising using wasm-opt..."),o.value="optimising",g.value="A warning";let l=c.readBinary(p);console.log(p.length),l.setFeatures(c.Features.All),c.setOptimizeLevel(3),c.setShrinkLevel(0),console.log(l.emitBinary().length),l.runPasses(["generate-global-effects"]),l.optimize(),console.log(l.emitBinary().length),console.log(l.emitBinary().length),l.optimize(),console.log(l.emitBinary().length),p=l.emitBinary(),console.log(p.length)}catch(c){console.error(c),a.value=c.message.toString(),c.stack&&(a.value+="<br>"+c.stack),a.value+="<br>See browser console for more info.        <brThis is not an unrecoverable error; the project should play         as normal (possibly with worse-than-expected performance).",x=!1}else console.log("skipping wasm-opt due to user settings");x=!0}catch(c){console.error(c),a.value=c.toString(),c.stack&&(a.value+="<br>"+c.stack),x=!1}console.log(d),Promise.all(r.json.targets.map(c=>new Promise(l=>Promise.all(c.costumes.map(({md5ext:I,dataFormat:P})=>new Promise(G=>V(I).then(H=>G([I,[P,H]]))))).then(l)))).then(c=>{h=Object.fromEntries(c.flat()),y.value=!0});function se(){x&&Ln({framerate:30,renderer:b,turbo:f.value,wasm_bytes:p,string_consts:d.strings,target_names:d.target_names,project_json:r.json,assets:h}).catch(c=>{console.error(c),g.value="An error",o.value="running",a.value=c.toString(),c.stack&&(a.value+=`
`+c.stack)})}function re(){window.stop()}return(c,l)=>(X(),oe(Te,null,[je(u("div",null,[u("h1",null,C(r.title||"untitled"),1),u("span",null,"by "+C(r.author||"unknown"),1),u("input",{type:"checkbox",id:"turbo",value:k(f)},null,8,Mn),l[0]||(l[0]=U()),l[1]||(l[1]=u("label",{for:"turbo"},"turbo mode",-1)),k(a)?(X(),oe("details",Pn,[u("summary",null,C(k(g))+" was emitted whilst "+C(k(o))+" project.",1),u("span",{innerHTML:k(a)},null,8,zn)])):ie("",!0),l[2]||(l[2]=u("br",null,null,-1)),l[3]||(l[3]=u("br",null,null,-1)),u("button",{onClick:se},"green flag"),l[4]||(l[4]=U()),u("button",{onClick:re},"stop"),u("canvas",{width:"480",height:"360",ref_key:"canvas",ref:T},null,512),l[5]||(l[5]=u("div",{id:"hq-output"},[U("Project output:"),u("br")],-1))],512),[[xe,k(y)]]),k(y)?ie("",!0):(X(),ve(Ae,{key:0},{default:Se(()=>[U(C(k(O)),1)]),_:1}))],64))}},Vn=he(Cn,[["__scopeId","data-v-0a408b5c"]]);export{Vn as P};
