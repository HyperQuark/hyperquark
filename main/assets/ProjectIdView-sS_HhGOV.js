import{P as b}from"./ProjectPlayer-CqBWrDcL.js";import{_ as k,r as a,p as u,k as w,c as h,o as p,a as l,d,t as P,F as x,w as c,b as y,L as g,S as B}from"./index-Cdc7Vomj.js";import"./settings-DaQyerX9.js";import"./index-OUawxo1V.js";const I={__name:"ProjectIdPlayer",props:["id"],async setup(i){let t,o;const r=i,n=a(null),m=a(""),v=a(""),f=a(""),j=a(""),_=a("");try{const s=([t,o]=u(async()=>([t,o]=u(()=>fetch(`https://trampoline.turbowarp.org/api/projects/${r.id}/`)),t=await t,o(),t).json()),t=await t,o(),t);v.value=s.title,f.value=s.author.username,j.value=s.instructions,_.value=s.description,m.value=([t,o]=u(()=>fetch(`https://projects.scratch.mit.edu/${r.id}/?token=${s.project_token}`).then(e=>{if(!e.ok)throw new Error("response was not OK");return e.json()})),t=await t,o(),t),n.value=!0}catch(s){n.value=s}return(s,e)=>n.value===!0?(p(),w(b,{key:0,json:m.value,id:r.id,author:f.value,title:v.value,instructions:j.value,description:_.value,zip:null},null,8,["json","id","author","title","instructions","description"])):(p(),h(x,{key:1},[e[1]||(e[1]=l("h1",null,"Project not found",-1)),e[2]||(e[2]=d(" This could be because it doesn't exist, or it may be private. ",-1)),e[3]||(e[3]=l("br",null,null,-1)),l("details",null,[e[0]||(e[0]=l("summary",null,"Error message (probably unhelpful):",-1)),d(" "+P(n.value),1)])],64))}},V=k(I,[["__scopeId","data-v-04913bd1"]]),S={__name:"ProjectIdView",props:["id"],setup(i){const t=i;return(o,r)=>(p(),w(B,null,{fallback:c(()=>[y(g,null,{default:c(()=>[...r[0]||(r[0]=[d("Loading project",-1)])]),_:1})]),default:c(()=>[y(V,{id:t.id},null,8,["id"])]),_:1}))}};export{S as default};
